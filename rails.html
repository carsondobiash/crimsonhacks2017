<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="favicon.ico">

    <title>CryptoMania</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <<a class="navbar-brand" href="index.html">Cryptomania</a>
        </div>
      </div>
    </nav>

    <div class="jumbotron" style="background: url('cryptphoto.png');background-repeat:no-repeat;">
    <div class="container">
        <h1 style="color: white">Rails Encryption</h1>
        <p style="color: white;font-weight:bold;">Use the text box below to input the text you wish to cipher. The rails cipher uses the number of rails to create that many groups of text that when split up and layered on top of itself it forms a rectangle that if traced displays a code.</p>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h2>Text to Encrypt:</h2>
          <textarea id="input"></textarea>
        </div>
        <div class="col-md-6">
          <h2>Text to Decrypt:</h2>
          <textarea id="output"></textarea>
        </div>
      </div>
      <p>Input number of rails: <input type="text" id="key"></p><br>
      <br>

      <div class="row">
        <div class="col-md-6">
          <p><a class="btn btn-default" style="color:white; background-color:green; border-color:white;" id="encryptMe" role="button">Encrypt Me! &raquo;</a></p>
        </div>
        <div class="col-md-6">
          <p><a class="btn btn-default" style="color:white; background-color:green; border-color:white;" id="decryptMe" role="button">Decrypt Me! &raquo;</a></p>
        </div>
      </div>

      <hr>

      <footer>

      </footer>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      document.getElementById("encryptMe").onclick = function (){
        var decoded = '';
        var valueInput = document.getElementById("input").value;
        valueInput=valueInput.replace(/\s/g, '');
        var rails=parseInt(document.getElementById("key").value);
        while((valueInput.length%rails)!=0){
          valueInput+='X';
        }
        for(var j=0; j< rails ;j++){
          for(var i = 0; i < valueInput.length; i+=rails){

            decoded +=  valueInput.charAt(j+i);
          }
        }
        document.getElementById("output").value = decoded;
      }

      document.getElementById("decryptMe").onclick = function (){
        var decoded = '';
        var valueInput = document.getElementById("output").value;
        var rails=parseInt(document.getElementById("key").value);
        var group= valueInput.length / rails;
        for(var j=0; j< group;j++){
          for(var i = 0; i < valueInput.length; i+=group){

            decoded +=  valueInput.charAt(j+i);
          }
        }
        document.getElementById("input").value = decoded;
      }
    </script>
  </body>
</html>
